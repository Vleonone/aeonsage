# ENGINEERING_LOG

### ğŸ“‹ ä»»åŠ¡æ—¥å¿— - 2026-01-31 04:40

#### ä»»åŠ¡ç›®æ ‡
UI æ„å»ºä¿®å¤ä¸ OMEGA åè®®æ‰§è¡Œ - è§£å†³ TypeScript ç±»å‹é”™é…ã€é‡å¤é”®å€¼å’Œæ¨¡å—å¯¼å‡ºé—®é¢˜ï¼Œç¡®ä¿ç”Ÿäº§ç¯å¢ƒæ„å»ºæˆåŠŸã€‚

#### æ ¸å¿ƒå˜æ›´
- **ä¿®æ”¹æ–‡ä»¶**:
    - `ui/src/ui/app.ts`: ç§»é™¤ `private` ä¿®é¥°ç¬¦ä»¥åŒ¹é… `AppViewState` æ¥å£ï¼Œè§£å†³ Host ç±»å‹å…¼å®¹æ€§é—®é¢˜ã€‚
    - `ui/src/ui/i18n.ts`: ç§»é™¤é‡å¤çš„ `usage` é”®å€¼ï¼Œä¿®å¤ esbuild è½¬æ¢é”™è¯¯ã€‚
    - `ui/src/ui/controllers/cron.ts`: å¯¼å‡º `loadCron` åŒ…è£…å™¨å‡½æ•°ï¼Œç»Ÿä¸€æ¨¡å—æ¥å£ã€‚
    - `ui/src/ui/app-gateway.ts`: ä¿®æ­£ `loadCron` çš„å¯¼å…¥è·¯å¾„ï¼Œä» `controllers` è€Œé `app-settings` å¯¼å…¥ã€‚
    - `ui/src/ui/controllers/usage.ts`: é‡å‘½å `loadUsage` ä¸º `loadUsageCost` ä»¥åŒ¹é…è°ƒç”¨æ–¹ã€‚
    - `ui/src/ui/controllers/tts.ts`: é‡å‘½å `loadTts` ä¸º `loadTtsStatus` ä»¥åŒ¹é…è°ƒç”¨æ–¹ã€‚
    - `ui/src/ui/storage.ts`: ä¸º `UiSettings` æ·»åŠ ç¼ºå°‘çš„å­æ ‡ç­¾é¡µç±»å‹å®šä¹‰ (`dashboardSubTab`, `connectSubTab`, etc.)ã€‚
    - `ui/src/ui/views/tts.ts`: æ›´æ–°è§†å›¾ä»¥æ¥å— `AppViewState` è€Œéå±€éƒ¨çŠ¶æ€ï¼Œç»Ÿä¸€æ•°æ®æµã€‚
    - `ui/src/ui/app-render.ts`: ç§»é™¤æœªå®šä¹‰çš„ `refreshChatAvatar` è°ƒç”¨ï¼Œæ›¿æ¢ä¸º `state.loadAssistantIdentity()`ã€‚

#### æŠ€æœ¯å†³ç­–
- **OMEGA åè®®æ‰§è¡Œ**: æ”¾å¼ƒ `replace_file_content` çš„å±€éƒ¨ä¿®è¡¥ç­–ç•¥ï¼Œæ”¹ç”¨å…¨æ–‡ä»¶è¦†ç›–æ¨¡å¼ (`write_to_file`) å¤„ç† `app.ts` å’Œ `i18n.ts`ï¼Œç¡®ä¿åœ¨å¤æ‚ä¸Šä¸‹æ–‡ä¸‹çš„ä¿®æ”¹åŸå­æ€§å’Œå‡†ç¡®æ€§ã€‚
- **çŠ¶æ€æ¥å£ç»Ÿä¸€**: å¼ºåˆ¶ `AeonSageApp` ç±»æˆå‘˜åŒ¹é… `AppViewState` æ¥å£çš„å…¬å¼€çº¦å®šï¼Œæ”¾å¼ƒé€šè¿‡ `private` éšè—éƒ¨åˆ†çŠ¶æ€çš„åšæ³•ï¼Œä»¥æ»¡è¶³ strict æ¨¡å¼ä¸‹çš„ç±»å‹æ£€æŸ¥ã€‚
- **æ¨¡å—åŒ–å¯¼å‡ºä¿®å¤**: ä¿®æ­£äº†éƒ¨åˆ†æ§åˆ¶å™¨ (`cron`, `usage`, `tts`) çš„å¯¼å‡ºå‘½åï¼Œä½¿å…¶ç¬¦åˆè¯­ä¹‰å¹¶è§£å†³å¾ªç¯ä¾èµ–æˆ–å¯¼å…¥è·¯å¾„é”™è¯¯ã€‚

#### å·²éªŒè¯é¡¹
- **æ„å»ºçŠ¶æ€**: `npm run build` (vite build) æˆåŠŸé€šè¿‡ã€‚
- **äº§ç‰©ç”Ÿæˆ**: æˆåŠŸç”Ÿæˆ `dist/control-ui/index.html` åŠç›¸å…³ assetsã€‚

#### ä¸‹ä¸€æ­¥å»ºè®®
- æ¨è¿› UI è§†è§‰ä¼˜åŒ–ï¼ˆå¡ç‰‡å¯¹æ¯”åº¦ã€å­—ä½“ï¼‰ã€‚
- éªŒè¯è¿è¡Œæ—¶åŠŸèƒ½ï¼ˆç‰¹åˆ«æ˜¯è¢«é‡æ„çš„ TTS å’Œ Cron æ¨¡å—ï¼‰ã€‚
